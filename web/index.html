<!DOCTYPE html>
<html>

<head>
  <title>c6m</title>
  <link rel="stylesheet" href="./css/style.css">
  <link rel="stylesheet" href="https://cdn.staticfile.org/font-awesome/6.4.2/css/all.min.css">
  <script src="https://cdn.staticfile.org/jquery/3.7.0/jquery.min.js"></script>
</head>

<body>
  <div id="loginpanel">
    <div>
      <input id="username" placeholder="用户名">
      <br>
      <input type="password" id="password" placeholder="密码">
      <br>
      <div class="alist">
        <button onclick="login()">登录</button>
        <a href="./register.html">注册</a>
        <a href="./resetpw.html">忘记密码</a>
      </div>
    </div>
  </div>

  <div id="main">
    <nav>
      <h1 style="opacity:.9">c6m</h1>
      <div>
        <button onclick="location.reload()"><i class='fa-solid fa-arrow-right-from-bracket'></i></button>
        <button onclick="window.open(`./changepw.html?username=${username}`,'_self')">修改密码</button>
      </div>
    </nav>

    <div class="dp05">
      <button onclick="addFriend()"><i class="fa-solid fa-user-plus"></i>添加好友</button>
      <button onclick="delFriend()"><i class="fa-solid fa-user-minus"></i>删除好友</button>
      <button onclick="getFriendReq()">查看好友申请</button>
      <button onclick="respFriendReq()">处理好友申请</button>
      <br>
      <button onclick="joinGroup()"><i class="fa-solid fa-user-group"></i>加入</button>
      <button onclick="leaveGroup()"><i class="fa-solid fa-user-group"></i>退出</button>
      <button onclick="inviteGroup()"><i class="fa-solid fa-person-circle-plus"></i>邀请</button>
      <button onclick="kickGroup()"><i class="fa-solid fa-person-circle-plus"></i>踢出</button>
      <button onclick="createGroup()"><i class="fa-solid fa-user-group"></i>创建</button>
      <button onclick="delGroup()"><i class="fa-solid fa-user-group"></i>解散</button>
      <button onclick="addGroupAdmin()"><i class="fa-solid fa-user-gear"></i>加管</button>
      <button onclick="delGroupAdmin()"><i class="fa-solid fa-user-gear"></i>下管</button>
      <button onclick="getGroupReq()">查看群申请</button>
      <button onclick="respGroupReq()">处理群申请</button>
    </div>

    <div>
      <select id="msgDest" onchange="showHistory()">
        <option value="0">请选择</option>
      </select>
      <button onclick="updateList()"><i class="fa-solid fa-rotate"></i></button>
      <button onclick="upload()"><i class="fa-solid fa-file-arrow-up"></i></button>
      <input type="file" id="file-input">
      <br>
      <textarea class="fullwidth" type="text" id="msgContent" placeholder="Enter发送, Shift+Enter换行" required></textarea>
      <script>
        $(document).on('keydown', '#msgContent', function (event) {
          if (event.keyCode === 13) {
            if (event.shiftKey) return
            else {
              send();
              event.preventDefault(); // 阻止默认的换行行为
            }
          }
        })
      </script>
    </div>

    <div id="history"></div>

    <footer>
      <p style="opacity:.9">©2023 Zhilu</p>
      <div class="iconset">
        <a href="https://github.com/l33z22l11/c6m"><i class="fa-brands fa-github"></i></a>
      </div>
    </footer>
  </div>

  <div id="toast"></div>
</body>

<script src="./js/app.js"></script>
<script src="./js/friend.js"></script>
<script src="./js/group.js"></script>

</html>